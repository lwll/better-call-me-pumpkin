(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{169:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("ul",[t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),s("li",[t._m(7),t._v(" "),s("p",[t._v("可配合Spring Data Repositories使用。在查询需要添加allow filtering的时候会出现问题。目前业务多用 "),s("a",{attrs:{href:"https://docs.spring.io/spring-data/cassandra/docs/1.5.6.RELEASE/reference/html/#cassandra-template",target:"_blank",rel:"noopener noreferrer"}},[t._v("cassandra-template"),s("OutboundLink")],1),t._v(" 相关api")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.spring.io/spring-data/cassandra/docs/1.5.6.RELEASE/reference/html/",target:"_blank",rel:"noopener noreferrer"}},[t._v("spring-data-cassandra 官方文档"),s("OutboundLink")],1)])])])])},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"cassandra简述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cassandra简述","aria-hidden":"true"}},[this._v("#")]),this._v(" Cassandra简述")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("li",[s("h4",{attrs:{id:"依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#依赖","aria-hidden":"true"}},[t._v("#")]),t._v(" 依赖")]),t._v(" "),s("p",[t._v("由于项目中使用的spring boot版本较低，Cassandra的版本选为1.5.6.RELEASE。引入依赖：")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-data-cassandra"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.5.6.RELEASE"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("该依赖又依赖于guava，补充：")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.google.guava"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("guava"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("19.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("li",[a("h4",{attrs:{id:"主键"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主键","aria-hidden":"true"}},[this._v("#")]),this._v(" 主键")]),this._v(" "),a("p",[this._v("Cassandra在使用联合主键时，第一主键是"),a("strong",[this._v("parition key,")]),this._v(" 决定了数据的分区，后面的主键是**Clustering Key，**决定了数据在分区中的排序方式。")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("li",[s("h4",{attrs:{id:"排序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#排序","aria-hidden":"true"}},[t._v("#")]),t._v(" 排序")]),t._v(" "),s("p",[t._v("Cassandra只能在分区里进行排序，且默认是Clustering Key升序排列，如果有多个Clustering Key，则排序优先级依次下降。")]),t._v(" "),s("p",[t._v("新增表的时候，可以使用 with clustering order by（Clustering Key）来决定数据在分区中以何种方式排序。这样查出来的数据默认就是指定的排序方式，不用使用order by。")]),t._v(" "),s("p",[t._v("Cassandra的排序支持较弱，所以应该在设计主键的时候就确定好数据在分区内的排序方式，而不是显示在cql里指定。")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("li",[s("h4",{attrs:{id:"查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询","aria-hidden":"true"}},[t._v("#")]),t._v(" 查询")]),t._v(" "),s("p",[t._v("Cassandra对查询有很多限制。")]),t._v(" "),s("p",[t._v("查询条件不支持 IN  OR")]),t._v(" "),s("p",[t._v("第一主键、索引列仅支持 = 查询，Clustering Key需配合主键（主键等于某个确定的值），才能进行= > >= < <= 四种查询，单独作为条件不可行。")]),t._v(" "),s("p",[t._v("当查询条件不满足上述条件，但因业务需要查询时，可在查询语句最后添加allow filtering。可能有性能问题，未进行性能分析。")]),t._v(" "),s("p",[t._v("查询视图时，就算视图的原表对应的字段加了索引，也必须加上allow filtering")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("li",[a("h4",{attrs:{id:"分页"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分页","aria-hidden":"true"}},[this._v("#")]),this._v(" 分页")]),this._v(" "),a("p",[this._v("不支持offset。目前处理业务分页时，将0到limit的数据全查出来，在java程序里手动分页。页面需去掉跳转页面以及最后一页功能。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("li",[a("h4",{attrs:{id:"新增"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增","aria-hidden":"true"}},[this._v("#")]),this._v(" 新增")]),this._v(" "),a("p",[this._v("批量新增时，有大小限制。默认上限为50kb，超过上限需分批次更新")]),this._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[this._v("# Fail any batch exceeding this value. 50kb (10x warn threshold) by default. batch_size_fail_threshold_in_kb: 50\n")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h4",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api","aria-hidden":"true"}},[this._v("#")]),this._v(" api")])}],!1,null,null,null);a.default=e.exports}}]);